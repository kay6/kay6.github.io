<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>Andy IE59000 - Exam2 - Question 3.1</title>
		<style type="text/css">
			/* in the interest of saving time. I will only add this type of detail if time permits */

		</style>
<!-- d3.js, Jquery and Ajax Scripts -->
		<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
		<script src="http://code.jquery.com/jquery-1.11.2.min.js"></script>
	</head>
	<body>

		<center><h1> Table of Items </h1></center>


		<center><table>
    		<thead></thead>
    		<tbody></tbody>
		</table></center>

		<br>

		<a href="http://hivelab.org/static/exam2.json" target="_blank"><p align="right">Hive Lab Exam 2 JSON file</p></a>

		<!-- D3.js Chart Script -->
		<script type="text/javascript">
			// Read in json data using d3.js
			// Source1: is Interactive Data Visulization - Scott Murray - Class Text Book
			// Source2: https://github.com/alignedleft/d3-book
			// Source2: http://stackoverflow.com/questions/19114927/d3-js-highlighting-a-row-in-table
			// Source3: http://bl.ocks.org/biovisualize/1226718

			// Variables
			var header = [];

			//Read JSON data file
			d3.json("https://hivelab.org/static/exam2.json", function(data) {
				console.log(data);
				console.log(d3.keys(data[0]));
				header=Object.keys(data[0]);
				console.log(header);
				console.log("Show header row: "+header);


				// Table function
				function tablemaker(data) {
					console.log("data passed as  "+data);

				/*	var table = d3.select ("body")
						.append("table")
						thead = table.append("thead"),
						tbody = table.append("tbody");  */

					// Append the header row
					var th = d3. select("thead")
						.selectAll("th")
						.data(header)
						.enter()
						.append("th")
						.text(function(d) {
							console.log(d[0]);
							return d[0];
						});

					// Create the rows for each object
					var rows = d3.select("tbody")
						.selectAll("tr")
						.data(data)
						.enter()
						.append("tr");

					//Create a cell in each row
					var cell = rows.selectAll("td")
					//	.data(function(d) {
					//		return dataArray(d);
					//		})
						.enter()
						.append("td")
						.text(function(d) {
							return d[1];
						});
				}

				// Funtion to build array for data
				function dataArray(input) {
					console.log("running dataArray");
					var pain = new Array();
					var key;
					console.log("input passed is "+input);
					for (key in input) {
						if (input.hasOwnProperty(key)) {
							pain.push(keyPainfix(key, input[key]));
						}
					}
					console.log("Pain is "+pain);
					return pain;
				}

				// Return the right values
				// Fix pain
				function keyPainfix (k, r) {
					console.log("running keyPainfix");
					return [k, r];
				};

				/* add in the fun parts with mouseover and transitions for it.
				// Need to get the rest working first
				.on(mouseover, function() {
					d3.select(this)
						......
						.transition()
						.duration(100)
						.......
				}
				.on(mouseout, function() {
					d3.select(this)
						......
				}  */

				// Call function and make the table.
				var makeit = tablemaker(["ItemNo"]);

			});


		</script>

	</body></center>
</html>