<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>Andy IE59000 - Exam2 - Question 3.1</title>
		<style type="text/css">
			/* in the interest of saving time. I will only add this type of detail if time permits */

		</style>
<!-- d3.js, Jquery and Ajax Scripts -->
		<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
		<script src="http://code.jquery.com/jquery-1.11.2.min.js"></script>
	</head>
	<body><center>

		<h1> Table of Items </h1>

		<a href="http://hivelab.org/static/exam2.json" target="_blank"><p align="right">Hive Lab Exam 2 JSON file</p></a>

		<!-- D3.js Chart Script -->
		<script type="text/javascript">
			// Source1: is Interactive Data Visulization - Scott Murray - Class Text Book
			// Source2: https://github.com/alignedleft/d3-book
			// Source2: http://stackoverflow.com/questions/19114927/d3-js-highlighting-a-row-in-table
			// Source3: http://bl.ocks.org/biovisualize/1226718
			// Source4: https://gist.github.com/LevelbossMike/2623382

			// Variables
			var header = [];

			//Read JSON data file
			d3.json("https://hivelab.org/static/exam2.json", function(data) {
				console.log(data);
				console.log(d3.keys(data[0]));
				header=Object.keys(data[0]);
				console.log(header);
				console.log("Show header row: "+header);


				// Table function
				function tablemaker(data, columns) {
					console.log("data passed as  "+data);

					var table = d3.select ("body")
						.append("table")
						thead = table.append("thead"),
						tbody = table.append("tbody");  

					// Append the header row
					thead.append("tr")
						.selectAll("th")
						.data(columns)
						.enter()
						.append("th")
						.text(function(column) {
							console.log(column);
							return column;
						});

					// Create the rows for each object
					var rows = tbody.selectAll("tr")
						.data(data)
						.enter()
						.append("tr");

					//Create a cell in each row
					var cell = rows.selectAll("td")
						.data(function(row) {
            				return columns.map(function(column) {
                				return {column: column, value: row[column]};
            				});
        				})
						.enter()
						.append("td")
						.html(function(d) {
							return d.value;
						});

					return table;
				}

				// Call function and make the table.
				var makeit = tablemaker(data, header);

			});


		</script>

	</center></body>
</html>